load("@bazel_skylib//rules:build_test.bzl", "build_test")
load("//bazel:zig.bzl", "zig_cc_binary")

zig_cc_binary(
    name = "mnist",
    args = [
        "$(location @mnist//:mnist.pt)",
        "$(location @mnist//:t10k-images.idx3-ubyte)",
    ],
    data = [
        "@mnist//:mnist.pt",
        "@mnist//:t10k-images.idx3-ubyte",
    ],
    main = "mnist.zig",
    deps = [
        "//async",
        "//zml",
    ],
)

build_test(
    name = "test",
    targets = [":mnist"],
)
