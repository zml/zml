load("@rules_zig//zig:defs.bzl", "zig_binary", "zig_library", "zig_test")

zig_library(
    name = "loader_lib",
    main = "main.zig",
    zigopts = ["-freference-trace=30"],
    deps = [
        "//async",
        "//stdx",
        "//zml",
    ],
)

zig_binary(
    name = "loader",
    deps = [":loader_lib"],
)

zig_test(
    name = "test",
    test_runner = "//zml:test_runner",
    deps = [":loader_lib"],
)
